var ajaxurl=meta_image.ajaxurl,user={onReady:function(){user.imageUploader(),user.removeImage(),user.removeVideo()},imageUploader:function(){var e;jQuery(".upload-image").click(function(a){a.preventDefault();var t=jQuery(this),r=t.parent(),o=r.attr("data-img"),u=r.attr("data-input"),i=r.attr("data-post");e=wp.media.frames.meta_image_frame=wp.media({title:meta_image.title,button:{text:meta_image.button},library:{type:"image, video"},multiple:!0}),e.open(),e.on("select",function(){var a=e.state().get("selection").first().toJSON();"bg_video"===o?(t.parent().append('<video muted autoplay id="bgvid" loop><source src="'+a.url+'" type="video/webm"><source src="'+a.url+'" type="video/ogv"><source src="'+a.url+'" type="video/mp4"></video>'),jQuery("#"+u).val(a.url),t.parent().append('<span class="button button-remove remove-video">X</span>'),t.remove(),user.saveFeaturedVideo(i,a.url)):(t.parent().append('<img src="'+a.url+'" alt="" />'),jQuery("#"+u).val(a.url),t.parent().append('<a href="#" class="remove-image">Remove icon</a>'),t.remove(),user.saveImage(i,u,a.url))})})},removeVideo:function(){jQuery(".remove-video").click(function(e){e.preventDefault();var a=jQuery(this).parent().attr("data-img"),t=jQuery(this).parent().attr("data-post");jQuery("."+a).html(""),jQuery("#custom_"+a).val(""),jQuery(".bg_video").append('<a href="" class="upload-image upload-banner">Set featured video</a>'),jQuery(this).remove(),user.saveFeaturedVideo(t,""),user.imageUploader()})},removeImage:function(){jQuery(".remove-image").click(function(e){e.preventDefault();var a=jQuery(this).parent().attr("data-input"),t=jQuery(this).parent().attr("data-post");jQuery(this).parent().find("input").val(""),jQuery(this).parent().find("img").remove(),user.saveImage(t,a,""),jQuery(this).parent().append('<a class="upload-image" data-input="'+a+'" data-post="'+t+'">Upload/Set Use Case icon</a>'),jQuery(this).remove(),user.imageUploader()})},saveImage:function(e,a,t){jQuery.ajax({url:ajaxurl,type:"GET",data:{imageField:a,fieldVal:t,postID:e,action:"setImage"},dataType:"html",success:function(){user.removeImage()},error:function(e,a,t){window.alert(e+" :: "+a+" :: "+t)}})},saveFeaturedVideo:function(e,a){jQuery.ajax({url:ajaxurl,type:"GET",data:{fieldVal:a,postID:e,action:"setVideo"},dataType:"html",success:function(){user.removeVideo()},error:function(e,a,t){window.alert(e+" :: "+a+" :: "+t)}})}};jQuery(document).ready(function(){user.onReady()});